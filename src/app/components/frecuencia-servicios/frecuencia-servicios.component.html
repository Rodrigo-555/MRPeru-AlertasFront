<div class="main-container">
  <div class="content">
    <h1>FRECUENCIA SERVICIOS</h1>
    
    <!-- Secci칩n 츼rbol de Clientes -->
    <div class="content-tree">
      <div class="tree">
        <ng-container *ngFor="let cliente of clientesData; trackBy: trackByCliente">
          <details>
            <summary>游늭 {{ cliente.nombre }}</summary>
            <ng-container *ngFor="let sub of cliente.subclientes; trackBy: trackBySubcliente">
              <details>
                <summary>游늭 {{ sub.nombre }}</summary>
                <ng-container *ngFor="let subcliente of sub.subclientes; trackBy: trackByPlanta">
                  <div 
                    class="planta-item" 
                    (click)="filtrarPorPlanta(subcliente.nombre)"
                    [class.selected]="plantaSeleccionada === subcliente.nombre">
                    游끽 {{ subcliente.nombre }}
                  </div>
                </ng-container>
              </details>
            </ng-container>
          </details>
        </ng-container>
      </div>
    </div>

    <h5>游닐 Notificaciones de Servicios</h5>

    <!-- Secci칩n de Filtros y B칰squeda -->
    <div class="search-container">
      <div class="form-group">
        <label for="estadoSelect">Estados:</label>
        <select
          id="estadoSelect"
          class="form-select custom-select"
          [(ngModel)]="estadoSeleccionado"
          (change)="filtrarEquipos()">
          <option value="">Todos</option>
          <option value="Activo游릭">Activo游릭</option>
          <option value="Inactivo游댮">Inactivo游댮</option>
        </select>
      </div>
      <div class="form-group">
        <label for="mantenimientoSelect">Mantenimiento:</label>
        <select
          id="mantenimientoSelect"
          class="form-select custom-select"
          [(ngModel)]="estadoMantenimientoSeleccionado"
          (change)="filtrarEquipos()">
          <option value="">Todos</option>
          <option value="Aun no requiere servicio游릭">Aun no requiere servicio游릭</option>
          <option value="Requiere Servicio丘멆잺">Requiere Servicio丘멆잺</option>
        </select>
      </div>
      <div class="search-group">
        <img src="assets/img/iconoSearch.png" alt="Buscar" class="input-search-icon">
        <input 
          type="text" 
          class="form-control custom-search" 
          placeholder="Busque el cliente"
          [(ngModel)]="busquedaCliente"
          (input)="filtrarEquipos()">
        <button
          class="btn btn-primary search-button"
          type="button"
          (click)="filtrarEquipos()">
          Buscar
        </button>
      </div>
    </div>

    <!-- Secci칩n Tabla de Equipos -->
    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>Local</th>
            <th>Contacto</th>
            <th>Email</th>
            <th>Fecha de Env칤o</th>
            <th>Referencia</th>
            <th>Estado</th>
            <th>Estado Mantenimiento</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let equipo of equiposFiltrados | slice:0:10; trackBy: trackByEquipo">
            <td>{{ plantaSeleccionada }}</td>
            <td>{{ equipo.contacto }}</td>
            <td>{{ equipo.email }}</td>
            <td>{{ equipo.fechaEnvio }}</td>
            <td>{{ equipo.referencia }}</td>
            <td>{{ equipo.estado }}</td>
            <td>{{ equipo.estado_mantenimiento }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
